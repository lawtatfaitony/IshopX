@using LanguageResource;
@using Ishop.Context;
@model Ishop.ViewModes.Order.OrderDetailView
@{
    ViewBag.Title = Lang.Views_GeneralUI_ConfirmOrder;
    //Layout = "~/Views/Shared/CreateOrderLayout.cshtml";
}
<div class="container">
     
    @using (Ajax.BeginForm("Index", "Order", new { CurrentOrderId = ViewBag.CurrentOrderId }, new AjaxOptions { HttpMethod = "post", OnSuccess = "HandleOrderIndexSuccDialog", OnFailure = "errOrderIndex", LoadingElementId = "Loading" }, new { @class = "form-horizontal" }))
    { 
        <div class="box box-info">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.AntiForgeryToken()
            @Html.HiddenFor(model => model.OrderId)
            @Html.HiddenFor(model => model.Payment)
            @Html.HiddenFor(model => model.District)
            @Html.HiddenFor(model => model.State) 
            @Html.HiddenFor(model => model.Country)
            <div id="box-header" class="box-header with-border">
                <blockquote class="h3 padding-left15 padding-bottom5 padding-top5">
                    <h5 class="box-title"><i class="fa fa-list-ul margin-right5" title="@Lang.ControllerName_Views_DefinitedUI_ConfirmOrderAnouncement" data_toggle="tooltip"></i>@Lang.DispatchNote_Address </h5>
                </blockquote>
                <!-- 付款后三个工作日内发货  改為 訂單列表 ControllerName_Views_DefinitedUI_ConfirmOrderAnouncement-->
            </div>
            <div class="box-body">
                <div class="form-group">
                    <label class="control-label col-md-2">@Lang.DispatchNote_Recipient</label>
                    <div class="col-md-10">
                        @Html.TextBoxFor(model => model.Recipient, new { @class = "form-control", autocomplete = "on", style = "max-width:410px;" })
                        @Html.ValidationMessageFor(model => model.Recipient, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-md-2">@Lang.DispatchNote_PhoneNumber</label>
                    <div class="col-md-10">
                        @Html.TextBoxFor(model => model.PhoneNumber, new { @class = "form-control", autocomplete = "on", style = "max-width:410px;" })
                        @Html.ValidationMessageFor(model => model.PhoneNumber, "", new { @class = "text-danger", style = "width:60%;" })
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-md-2">@Lang.DispatchNote_TelePhoneNumber</label>
                    <div class="col-md-10">
                        @Html.TextBoxFor(model => model.TelePhoneNumber, new { @class = "form-control", autocomplete = "on", style = "max-width:410px;" })
                        @Html.ValidationMessageFor(model => model.TelePhoneNumber, "", new { @class = "text-danger", style = "width:60%;" })
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-2">@Lang.DispatchNote_Address</label>
                    <div class="col-md-10">
                        @Html.TextAreaFor(m => m.Address, new { @class = "form-control", row = 2, style = "max-width:410px;" })
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-lg-offset-2 padding-left15">
                        <button type="submit" class="btn btn-primary">@Lang.Views_GeneralUI_Submit</button>
                    </div> 
                 </div>
                </div>
        </div>
    }

    <div class="box box-info">
        <div id="box-header" class="box-header with-border">
            <blockquote class="h3 padding-left15 padding-bottom5 padding-top5">
                <a href="/@ViewBag.LanguageCode/Order/index">
                    <h5 class="box-title">
                        <i class="fa fa-list-ul margin-right5"></i>
                         @Lang.Views_GeneralUI_OrderDetails
                    </h5>
                </a>
            </blockquote>
            <!-- 付款后三个工作日内发货  改為 訂單列表 -->
        </div>
        <div class="box-body"> 
            <div id="MyOrderAndDetails" style="margin-top:15px">
                @{
                    List<Ishop.Models.ProductMgr.OrderItem> OrderItems = ViewBag.OrderItems;
                    if (OrderItems.Count > 0)
                    {
                        foreach (var Item in OrderItems)
                        {
                            <div id="@Item.OrderItemId" style="padding:5px 0px 5px 0px; border-bottom-color:crimson;border-bottom-width:4px;border-bottom-left-radius:4px;border-bottom-right-radius:4px;">
                                @Html.Partial("~/Views/Shared/ShoppingCart/OrderItemListUnit.cshtml", Item)
                            </div>
                        }
                    }
                    else
                    {
                        <div class="container">
                            <span class="h3 padding-left15 h4" style="font-weight:600;">
                                <i class="fa fa-exclamation-triangle text-danger"></i> There are no order records!!!
                            </span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>

    <!--floatFooter 使用現在支付,暫時不用-->
    <footer class="floatFooter hide">
        <div class="BtmFunLayer  container-fluid bg-black-active" style="width:70%;margin-bottom:10px;">
            <table style="padding:5px 5px 5px 5px;width:100%">
                <tr>
                    <td style="padding:5px 5px 5px 5px;width:50%" class="h4 text-red text-bold">
                        @string.Format("{0:C0}", Decimal.Parse(Html.DisplayFor(m => m.Payment).ToString()))
                    </td>
                    <td style="width:50%;padding:5px 5px 5px 5px;">
                        <button type="submit" id="BtnOKGotoPay" class="btn btn-info btn-flat text-bold">@Lang.Order_Index_DefinitedUI_OkAndGotoPay<!--Order_Index_DefinitedUI_OkAndGotoPay--></button>&nbsp;&nbsp;
                    </td>
                </tr>
            </table>
        </div>
    </footer>
</div>

<script>

    function HandleOrderIndexSuccDialog(data) {
          
        var index_order = layer.open({
            content: data.Message
        });
    }
</script>

